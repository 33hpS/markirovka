#!/usr/bin/env sh

if [ "$SKIP_TESTS" = "1" ]; then
	echo "[pre-push] SKIP_TESTS=1 -> skipping tests"
	exit 0
fi

node scripts/ensure-tests.mjs || exit 1
# Use run mode to avoid interactive watch hanging in pre-push
npx vitest run --passWithNoTests